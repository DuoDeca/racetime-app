<a class="race{% if not race.recorded and race.recordable %} recordable{% endif %}" href="{{ race.get_absolute_url }}">
    <span class="main">
        <span class="left">
            <span class="goal">
                {% if nocontext %}
                    {{ race.category.short_name }}
                {% endif %}
                {{ race.goal|default:race.custom_goal }}
            </span>
            <span class="state">
                {% if not race.is_async %}
                    {{ race.state_info.verbose_value }}
                {% else %}
                    {% if race.is_in_progress %}
                        Accepting entries
                    {% else %}
                        Finished
                    {% endif %}
                {% endif %}
                {% if race.is_done %}
                    <span class="recorded">
                        {% if race.recorded %}
                            recorded
                        {% else %}
                            {% if race.recordable %}
                                awaiting record
                            {% else %}
                                not recorded
                            {% endif %}
                        {% endif %}
                    </span>
                {% endif %}
            </span>
        </span>
        <span class="right">
            <span class="entrants">
                {{ race.entrants_count }} entrant{{ race.entrants_count|pluralize }}
            </span>
            {% if not race.is_async %}
                {% if race.started_at %}
                    <time class="timer {% if race.is_pending or race.is_in_progress %}autotick{% endif %}" datetime="{{ race.started_at.isoformat }}">
                        {{ race.timer_html|safe }}
                    </time>
                {% else %}
                    <time class="timer">
                        {{ race.timer_html|safe }}
                    </time>
                {% endif %}
            {% else %}
                {% if race.is_in_progress %}
                    <time class="timer autotick autotick-abs autotick-nodecisec" datetime="{{ race.ended_at.isoformat }}"></time>
                {% endif %}
            {% endif %}
        </span>
    </span>
    {% if race.info and not nocontext %}
        <span class="info">
            {{ race.info }}
        </span>
    {% endif %}
</a>
